<!DOCTYPE html>
<html lang="ro">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <script>
      // Prevent flash: apply saved theme (or OS preference) as early as possible
      (function(){
        try{
          var key = 'greudespus-theme';
          var t = localStorage.getItem(key);
          if(!t){
            var prefers = window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches;
            t = prefers ? 'dark' : 'light';
          }
          if(t === 'dark') document.documentElement.classList.add('dark-theme');
        }catch(e){}
      })();
    </script>
    <title>Cum arată viitorul? — Previziuni demografice</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="css/styles.css" rel="stylesheet">
  </head>
  <body>
    <nav class="navbar navbar-expand-lg navbar-light bg-light shadow-sm">
      <div class="container">
        <a class="navbar-brand fw-bold" href="index.html">Greu de spus</a>
        <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#mainNavFuture" aria-controls="mainNavFuture" aria-expanded="false" aria-label="Toggle navigation">
          <span class="navbar-toggler-icon"></span>
        </button>
        <div class="collapse navbar-collapse" id="mainNavFuture">
          <ul class="navbar-nav me-auto mb-2 mb-lg-0">
            <li class="nav-item"><a class="nav-link" href="index.html">Acasă</a></li>
            <li class="nav-item"><a class="nav-link active" href="cum-arata-viitorul.html">Cum arată viitorul?</a></li>
          </ul>
          <ul class="navbar-nav ms-auto mb-2 mb-lg-0 align-items-center">
            <li class="nav-item ms-2">
              <button id="themeToggle" class="theme-toggle" aria-pressed="false" title="Comută tema">☀️ Light</button>
            </li>
          </ul>
        </div>
      </div>
    </nav>

    <main class="container my-5">
      <header class="mb-4 text-center">
        <h1>Cum arată viitorul?</h1>
        <p class="text-muted">Proiecții simple ale populației României pe baza recensămintelor și scenarii de politică demografică.</p>
      </header>

      <section class="mb-4">
        <div class="p-4 bg-body-tertiary rounded">
          <h2 class="h5">Grafic: istoric + proiecție</h2>
          <canvas id="futureChart" width="900" height="360" aria-label="Grafic proiecție populație"></canvas>
        </div>
      </section>

      <section class="mb-4">
        <div class="p-4 bg-body-tertiary rounded">
          <h3 class="h6">Scenarii și variabile</h3>
          <div class="row gy-3">
            <div class="col-12 col-md-4">
              <label class="form-label">Scenariu</label>
              <select id="scenario" class="form-select">
                <option value="status">Status quo</option>
                <option value="pessimistic">Pesimist</option>
                <option value="pronatalist">Pro-natalist</option>
                <option value="custom">Personalizat</option>
              </select>
            </div>
            <div class="col-12 col-md-4">
              <label class="form-label">Modul de proiecție</label>
              <select id="modeSelect" class="form-select">
                <option value="params">Parametri demografici (CBR/CDR/mig)</option>
                <option value="indices">Indici / metode rapide</option>
              </select>
              <div class="small text-muted">Alege dacă vrei să folosești parametri demografici sau o metodă pe indici.</div>
            </div>
            <div id="paramsWrap">
              <div class="col-12 col-md-4">
                <label class="form-label">Rată brută natalitate (nașteri la 1000 locuitori / an)</label>
                <input id="cbr" type="number" step="0.1" class="form-control" value="10.6">
                <div class="small text-muted">Ex: 10.6 înseamnă ~10.6 nașteri la 1000 persoane pe an (valorile INS recente)</div>
              </div>
              <div class="col-12 col-md-4">
                <label class="form-label">Rată brută mortalitate (decese la 1000 locuitori / an)</label>
                <input id="cdr" type="number" step="0.1" class="form-control" value="17.6">
                <div class="small text-muted">Ex: 17.6 înseamnă ~17.6 decese la 1000 persoane pe an (valorile INS recente)</div>
              </div>
              <div class="col-12 col-md-4">
                <label class="form-label">Migrație netă anuală (persoane)</label>
                <input id="migNet" type="number" class="form-control" value="-10000">
                <div class="small text-muted">Valoare pozitivă = intrări nete, negativ = plecări nete</div>
              </div>
            </div>

            <div class="col-12 col-md-4">
              <label class="form-label">Orizont proiecție (ani)</label>
              <input id="horizon" type="number" class="form-control" value="30" min="5" max="80">
            </div>

            <div class="col-12 col-md-4" id="indexChoiceWrap" style="display:none;">
              <label class="form-label">Metodă (indici)</label>
              <select id="indexChoice" class="form-select">
                <option value="fixedIndex">Indice fix (% anual)</option>
                <option value="subtractPerYear">Scădere/creștere fixă (persoane/an)</option>
                <option value="rateBased">Rată anuală (procent)</option>
              </select>
              <div class="small text-muted">Când folosești 'Indici', alege metoda specifică aici.</div>
            </div>

            <div class="col-12 col-md-4" id="methodWrap">
              <label class="form-label">Metodă de calcul</label>
              <select id="method" class="form-select">
                <option value="demographic">Model demografic</option>
                <option value="fixedIndex">Indice fix (% anual)</option>
                <option value="subtractPerYear">Scădere/creștere fixă (persoane/an)</option>
                <option value="rateBased">Rată anuală (procent) sau auto</option>
              </select>
            </div>

            <div class="col-12 col-md-4">
              <label id="methodParamLabel" class="form-label">Parametru metodă</label>
              <input id="methodParam" type="text" class="form-control" placeholder="ex: -1 (procent) sau -50000 (persoane)" />
              <div class="small text-muted" id="methodHelp">Valoare implicită în funcție de metodă; lasă gol pentru 'auto' la metoda 'Rată anuală'.</div>
            </div>

            <div class="col-12">
              <button id="applyBtn" class="btn btn-primary mt-2">Aplică scenariu</button>
            </div>

            <div class="col-12">
              <div id="explain" class="mt-3">
                <h4 class="h6">Explicații</h4>
                <p class="small text-muted">Modelul folosește date istorice din recensăminte (1919–2021) și un model demografic agregat: natalitate brută, mortalitate bruta și migrație netă anuală. Proiecția aplică anual: nașteri = populație * (natalitate bruta/1000), decese = populație * (mortalitate bruta/1000) și migrație netă (persoane).</p>
              </div>
            </div>
          </div>
        </div>
      </section>

      <footer class="mt-4">
        <p class="small text-muted">Sursa datelor: INS, Banca Mondiala (de adaugat mai multe surse)</p>
      </footer>
    </main>

    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="js/future.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
    <script src="js/darkmode.js"></script>
  </body>
</html>
