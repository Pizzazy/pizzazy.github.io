// flubber shim: expose window.flubber.interpolate using simpleMorph.interpolate when available.
// This is a tiny compatibility shim so morphing works offline using our simpleMorph fallback.
(function(window){
  function interpolate(a,b,opts){
    // prefer true flubber if already loaded
    if(window.__realFlubber && typeof window.__realFlubber.interpolate === 'function'){
      return window.__realFlubber.interpolate(a,b,opts);
    }
    // otherwise try simpleMorph.interpolate
    if(window.simpleMorph && typeof window.simpleMorph.interpolate === 'function'){
      var fn = window.simpleMorph.interpolate(a,b);
      if(fn) return fn;
    }
    // fallback: return a step function that returns b when t>=1
    return function(t){ return t>=1 ? b : a; };
  }
  // support vendor injection: if a real flubber loads later, keep reference
  window.flubber = window.flubber || { interpolate: interpolate };
  // capture a reference if a real flubber library sets window.flubber later
  (function(){
    var original = Object.getOwnPropertyDescriptor(window, 'flubber');
    // if flubber not configurable or already present, still set helper
    if(!original){
      try{ Object.defineProperty(window, '__setFlubber', { value: function(f){ window.__realFlubber = f; window.flubber = f; } }); } catch(e){}
    }
  })();
})(window);
